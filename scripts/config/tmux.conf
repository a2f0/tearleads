# Tuxedo tmux configuration
# Use a login shell
set -g default-command "${SHELL}"

setw -g mode-keys vi

set-option -g status-position top

# Tokyo Night color palette
# bg: #1a1b26, fg: #c0caf5, blue: #7aa2f7, purple: #bb9af7
# cyan: #7dcfff, orange: #ff9e64, green: #9ece6a

# Status bar styling (Tokyo Night)
set -g status-style "bg=#1a1b26,fg=#c0caf5"
set -g status-left "#[fg=#7aa2f7,bold][#S] "
set -g status-left-length 20

# cntrl + t to create a new window ('tab')
bind -n C-t new-window

# cmd + left/right - move window left / right (via Ghostty keybind)
# Always focus the terminal pane (left side, pane 0) after switching
bind-key -n M-Left previous-window \; select-pane -t 0
bind-key -n M-Right next-window \; select-pane -t 0

# reload config (uses TUXEDO_TMUX_CONF env var set by tuxedo.sh)
bind-key -n C-r run-shell 'tmux source-file "${TUXEDO_TMUX_CONF:-$HOME/.tmux.conf}" && tmux display-message "Config reloaded"'

bind-key -n C-k clear-history \; send-keys clear Enter

# show working directory and git branch in status bar (upper right)
set -g status-right '#[fg=#bb9af7]#{pane_current_path} #[fg=#9ece6a]#(cd "#{pane_current_path}"; git rev-parse --abbrev-ref HEAD 2>/dev/null)'
set -g status-right-length 100
set -g status-interval 5

# Window status styling (Tokyo Night)
# Inactive: muted gray, Active: bright with blue background
set -g window-status-format '#[fg=#565f89]#I:#W'
set -g window-status-current-format '#[fg=#c0caf5,bg=#3d59a1,bold] #I:#W #[default]'
set -g window-status-separator "  "

# Pane border styling (Tokyo Night)
set -g pane-border-style "fg=#3b4261"
set -g pane-active-border-style "fg=#7aa2f7"

# Message styling
set -g message-style "bg=#1a1b26,fg=#7aa2f7"

# Right-click context menu
bind-key -n MouseDown3Pane display-menu -T "#[align=centre]Tuxedo" -x M -y M \
    "Reload Config       (Ctrl+R)" r 'run-shell "tmux source-file \"${TUXEDO_TMUX_CONF:-$HOME/.tmux.conf}\" && tmux display-message \"Config reloaded\""' \
    "" \
    "New Window          (Ctrl+T)" n "new-window" \
    "Kill Window                k" k "kill-window" \
    "" \
    "Split Horizontal           h" h "split-window -h" \
    "Split Vertical             v" v "split-window -v" \
    "" \
    "Detach                     d" d "detach-client" \
    "" \
    "Kill Session               K" K "kill-session"
