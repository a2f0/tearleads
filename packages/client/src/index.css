@import "tailwindcss";
@import "@rapid/ui/styles.css";

@source "../../ui/src";

/* Edge-to-edge safe area handling */
.safe-area-inset {
  padding-top: env(safe-area-inset-top);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* Override react-pdf page wrapper backgrounds for dark theme support */
.pdf-container .react-pdf__Page {
  background: transparent;
}

/* Constrain PDF page width to prevent horizontal scrolling on mobile.
   !important is required to override react-pdf's inline height style on the canvas,
   which is set dynamically based on scale. Without it, the aspect ratio breaks
   when max-width constrains the width. */
.pdf-container .react-pdf__Page canvas {
  max-width: 100%;
  height: auto !important;
}

/* Constrain text and annotation layers to match canvas */
.pdf-container .react-pdf__Page .react-pdf__Page__textContent,
.pdf-container .react-pdf__Page .react-pdf__Page__annotations {
  max-width: 100%;
  overflow: hidden;
}

/* Audio slider shared styling */
.audio-slider-seek,
.audio-slider-volume {
  --progress: 0%;
  --audio-slider-track: var(--muted-foreground);
  --audio-slider-progress: var(--primary);
  --audio-slider-thumb-bg: var(--primary);
  --audio-slider-thumb-border: var(--background);
  --audio-slider-thumb-shadow: 0 0 0 2px var(--background),
    0 0 0 4px var(--primary), 0 1px 3px rgba(0, 0, 0, 0.35);
  -webkit-appearance: none;
  appearance: none;
  accent-color: var(--primary);
  background: transparent;
  border: 1px solid var(--muted-foreground);
}

/* Audio seek slider styling */
.audio-slider-seek {
  background: linear-gradient(
    to right,
    var(--audio-slider-progress) var(--progress),
    var(--audio-slider-track) var(--progress)
  );
  border-radius: 9999px;
}

/* Webkit seek slider track */
.audio-slider-seek::-webkit-slider-runnable-track {
  height: 8px;
  background: linear-gradient(
    to right,
    var(--audio-slider-progress) var(--progress),
    var(--audio-slider-track) var(--progress)
  );
  border-radius: 9999px;
  border: 1px solid var(--muted-foreground);
  box-shadow: inset 0 0 0 1px var(--background),
    0 1px 2px rgba(0, 0, 0, 0.15);
}

/* Volume slider with ramp/wedge shape */
.audio-slider-volume {
  position: relative;
  background: var(--audio-slider-track);
  border-radius: 2px;
}

/* Webkit volume slider track with ramp shape */
.audio-slider-volume::-webkit-slider-runnable-track {
  height: 12px;
  background: linear-gradient(
    to right,
    var(--audio-slider-progress) var(--progress),
    var(--audio-slider-track) var(--progress)
  );
  clip-path: polygon(0 100%, 100% 0, 100% 100%);
  border-radius: 2px;
  border: 1px solid var(--muted-foreground);
  box-shadow: inset 0 0 0 1px var(--background),
    0 1px 2px rgba(0, 0, 0, 0.15);
}

/* Firefox volume slider track with ramp shape */
.audio-slider-volume::-moz-range-track,
.audio-slider-volume::-moz-range-progress {
  height: 12px;
  clip-path: polygon(0 100%, 100% 0, 100% 100%);
  border-radius: 2px;
}

.audio-slider-volume::-moz-range-track {
  background: var(--audio-slider-track);
  border: 1px solid var(--muted-foreground);
  box-shadow: inset 0 0 0 1px var(--background),
    0 1px 2px rgba(0, 0, 0, 0.15);
}

/* Firefox volume slider progress (filled portion) */
.audio-slider-volume::-moz-range-progress {
  background: var(--audio-slider-progress);
  box-shadow: inset 0 0 0 1px var(--background);
}

/* Common slider thumb styles */
.audio-slider-seek::-webkit-slider-thumb,
.audio-slider-volume::-webkit-slider-thumb,
.audio-slider-seek::-moz-range-thumb,
.audio-slider-volume::-moz-range-thumb {
  border-radius: 50%;
  background: var(--audio-slider-thumb-bg);
  cursor: pointer;
  border: 2px solid var(--audio-slider-thumb-border);
  box-shadow: var(--audio-slider-thumb-shadow);
}

.audio-slider-seek::-webkit-slider-thumb:hover,
.audio-slider-volume::-webkit-slider-thumb:hover,
.audio-slider-seek::-moz-range-thumb:hover,
.audio-slider-volume::-moz-range-thumb:hover {
  background: var(--audio-slider-thumb-bg);
  box-shadow: 0 0 0 6px color-mix(in srgb, var(--primary) 25%, transparent),
    var(--audio-slider-thumb-shadow);
  transform: scale(1.1);
}

/* Webkit (Chrome, Safari, Edge) specific thumb styles */
.audio-slider-seek::-webkit-slider-thumb,
.audio-slider-volume::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
}

.audio-slider-seek::-webkit-slider-thumb {
  width: 16px;
  height: 16px;
  margin-top: -4px; /* Center 16px thumb on 8px track */
}

.audio-slider-volume::-webkit-slider-thumb {
  width: 14px;
  height: 14px;
  margin-top: -1px;
}

/* Firefox specific thumb styles */
.audio-slider-seek::-moz-range-thumb {
  width: 16px;
  height: 16px;
}

.audio-slider-volume::-moz-range-thumb {
  width: 14px;
  height: 14px;
}

/* Firefox seek slider track and progress - shared properties */
.audio-slider-seek::-moz-range-track,
.audio-slider-seek::-moz-range-progress {
  height: 8px;
  border-radius: 9999px;
}

.audio-slider-seek::-moz-range-track {
  background: var(--audio-slider-track);
}

/* Firefox seek slider progress (filled portion) */
.audio-slider-seek::-moz-range-progress {
  background: var(--audio-slider-progress);
  box-shadow: inset 0 0 0 1px var(--background);
}
