@import "tailwindcss";

@layer base, app, themes;

@import "../../ui/src/styles/index.css" layer(base);
@import "../generated/app-theme.css" layer(app);
@import "../../ui/src/styles/theme.css" layer(themes);

/* Override Tailwind preflight's `border: 0 solid` (which defaults border-color to
   currentColor). Placed directly in @layer base (not inside a layer(base) import) so
   it sits at the same level as Tailwind's preflight — later in source order wins —
   while remaining overridable by utilities like border-transparent / hover:border-primary. */
@layer base {
  * {
    border-color: var(--soft-border);
  }
}

@source "../../admin/src";
@source "../../ai/src";
@source "../../analytics/src";
@source "../../audio/src";
@source "../../backups/src";
@source "../../businesses/src";
@source "../../calendar/src";
@source "../../camera/src";
@source "../../classic/src";
@source "../../contacts/src";
@source "../../email/src";
@source "../../health/src";
@source "../../mls-chat/src";
@source "../../notes/src";
@source "../../settings/src";
@source "../../terminal/src";
@source "../../ui/src";
@source "../../vehicles/src";
@source "../../vfs-explorer/src";
@source "../../wallet/src";
@source "../../window-manager/src";

:root.square-corners {
  --radius: 0rem;
  --radius-xs: 0rem;
  --radius-sm: 0rem;
  --radius-md: 0rem;
  --radius-lg: 0rem;
  --radius-xl: 0rem;
  --radius-2xl: 0rem;
  --radius-3xl: 0rem;
  --radius-4xl: 0rem;
  --scrollbar-radius: 0rem;
}

/* Edge-to-edge safe area handling */
.safe-area-inset {
  padding-top: env(safe-area-inset-top);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* Override react-pdf page wrapper backgrounds for dark theme support */
.pdf-container .react-pdf__Page {
  background: transparent;
}

/* Constrain PDF page width to prevent horizontal scrolling on mobile.
   !important is required to override react-pdf's inline height style on the canvas,
   which is set dynamically based on scale. Without it, the aspect ratio breaks
   when max-width constrains the width. */
.pdf-container .react-pdf__Page canvas {
  max-width: 100%;
  height: auto !important;
}

/* Constrain text and annotation layers to match canvas */
.pdf-container .react-pdf__Page .react-pdf__Page__textContent,
.pdf-container .react-pdf__Page .react-pdf__Page__annotations {
  max-width: 100%;
  overflow: hidden;
}

/* Audio slider shared styling */
.audio-slider-seek,
.audio-slider-volume {
  --progress: 0%;
  --audio-slider-track: var(--muted-foreground);
  --audio-slider-progress: var(--primary);
  --audio-slider-thumb-bg: var(--primary);
  --audio-slider-thumb-border: var(--background);
  --audio-slider-thumb-shadow: 0 0 0 2px var(--background),
    0 0 0 4px var(--primary), 0 1px 3px rgba(0, 0, 0, 0.35);
  -webkit-appearance: none;
  appearance: none;
  accent-color: var(--primary);
  background: transparent;
  border: 1px solid var(--muted-foreground);
}

/* Audio seek slider styling */
.audio-slider-seek {
  background: linear-gradient(
    to right,
    var(--audio-slider-progress) var(--progress),
    var(--audio-slider-track) var(--progress)
  );
  border-radius: 9999px;
}

/* Webkit seek slider track */
.audio-slider-seek::-webkit-slider-runnable-track {
  height: 8px;
  background: linear-gradient(
    to right,
    var(--audio-slider-progress) var(--progress),
    var(--audio-slider-track) var(--progress)
  );
  border-radius: 9999px;
  border: 1px solid var(--muted-foreground);
  box-shadow: inset 0 0 0 1px var(--background),
    0 1px 2px rgba(0, 0, 0, 0.15);
}

/* Volume slider with ramp/wedge shape */
.audio-slider-volume {
  position: relative;
  background: var(--audio-slider-track);
  border-radius: 2px;
}

.audio-slider-volume::-webkit-slider-runnable-track,
.audio-slider-volume::-moz-range-track,
.audio-slider-volume::-moz-range-progress {
  height: 12px;
  clip-path: polygon(0 100%, 100% 0, 100% 100%);
  border-radius: 2px;
}

.audio-slider-volume::-webkit-slider-runnable-track,
.audio-slider-volume::-moz-range-track {
  border: 1px solid var(--muted-foreground);
  box-shadow: inset 0 0 0 1px var(--background),
    0 1px 2px rgba(0, 0, 0, 0.15);
}

/* Webkit volume slider track with ramp shape */
.audio-slider-volume::-webkit-slider-runnable-track {
  background: linear-gradient(
    to right,
    var(--audio-slider-progress) var(--progress),
    var(--audio-slider-track) var(--progress)
  );
}

/* Firefox volume slider track with ramp shape */
.audio-slider-volume::-moz-range-track {
  background: var(--audio-slider-track);
}

/* Firefox volume slider progress (filled portion) */
.audio-slider-volume::-moz-range-progress {
  background: var(--audio-slider-progress);
  box-shadow: inset 0 0 0 1px var(--background);
}

/* Common slider thumb styles */
.audio-slider-seek::-webkit-slider-thumb,
.audio-slider-volume::-webkit-slider-thumb,
.audio-slider-seek::-moz-range-thumb,
.audio-slider-volume::-moz-range-thumb {
  border-radius: 50%;
  background: var(--audio-slider-thumb-bg);
  cursor: pointer;
  border: 2px solid var(--audio-slider-thumb-border);
  box-shadow: var(--audio-slider-thumb-shadow);
}

.audio-slider-seek::-webkit-slider-thumb:hover,
.audio-slider-volume::-webkit-slider-thumb:hover,
.audio-slider-seek::-moz-range-thumb:hover,
.audio-slider-volume::-moz-range-thumb:hover {
  background: var(--audio-slider-thumb-bg);
  box-shadow: 0 0 0 6px color-mix(in srgb, var(--primary) 25%, transparent),
    var(--audio-slider-thumb-shadow);
  transform: scale(1.1);
}

/* Webkit (Chrome, Safari, Edge) specific thumb styles */
.audio-slider-seek::-webkit-slider-thumb,
.audio-slider-volume::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
}

.audio-slider-seek::-webkit-slider-thumb {
  width: 16px;
  height: 16px;
  margin-top: -4px; /* Center 16px thumb on 8px track */
}

.audio-slider-volume::-webkit-slider-thumb {
  width: 14px;
  height: 14px;
  margin-top: -1px;
}

/* Firefox specific thumb styles */
.audio-slider-seek::-moz-range-thumb {
  width: 16px;
  height: 16px;
}

.audio-slider-volume::-moz-range-thumb {
  width: 14px;
  height: 14px;
}

/* Firefox seek slider track and progress - shared properties */
.audio-slider-seek::-moz-range-track,
.audio-slider-seek::-moz-range-progress {
  height: 8px;
  border-radius: 9999px;
}

.audio-slider-seek::-moz-range-track {
  background: var(--audio-slider-track);
}

/* Firefox seek slider progress (filled portion) */
.audio-slider-seek::-moz-range-progress {
  background: var(--audio-slider-progress);
  box-shadow: inset 0 0 0 1px var(--background);
}
