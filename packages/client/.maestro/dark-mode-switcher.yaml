appId: com.tearleads.rapid
---
- launchApp:
    clearState: true

- assertVisible: "Tearleads"

# Navigate to settings page
- evalScript: document.querySelector('[data-testid="settings-link"]').click()

# Wait for Settings page to load
- extendedWaitUntil:
    visible: "Settings"
    timeout: 10000

# Tap the dark mode switch (starts in light mode by default)
- evalScript: document.querySelector('[data-testid="dark-mode-switch"]').click()

# Wait for theme transition
- swipe:
    direction: DOWN
    duration: 300

# Verify theme switched to dark
- evalScript: |
    (function() {
      var isDark = document.documentElement.classList.contains('dark');
      if (!isDark) throw new Error('Expected dark mode');
      return 'ok';
    })()

# Tap again to switch back to light
- evalScript: document.querySelector('[data-testid="dark-mode-switch"]').click()

# Wait for theme transition
- swipe:
    direction: DOWN
    duration: 300

# Verify we're back to light mode
- evalScript: |
    (function() {
      var isDark = document.documentElement.classList.contains('dark');
      if (isDark) throw new Error('Expected light mode');
      return 'ok';
    })()
