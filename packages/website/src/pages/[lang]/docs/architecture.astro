---
import Layout from '../../../layouts/Layout.astro';
import DocPageLayout from '../../../layouts/DocPageLayout.astro';
import { supportedLanguages, isSupportedLanguage, defaultLanguage } from '../../../i18n/config';
import type { SupportedLanguage } from '../../../i18n/config';

export function getStaticPaths() {
  return supportedLanguages.map((lang) => ({ params: { lang } }));
}

const { lang } = Astro.params;
const currentLang: SupportedLanguage = isSupportedLanguage(lang) ? lang : defaultLanguage;

// Dynamic import based on locale
const docs: Record<SupportedLanguage, () => Promise<{ Content: any }>> = {
  en: () => import('../../../../../../docs/en/encryption-architecture.md'),
  es: () => import('../../../../../../docs/es/encryption-architecture.md'),
  ua: () => import('../../../../../../docs/ua/encryption-architecture.md'),
};

const { Content } = await docs[currentLang]();
---

<Layout title="Architecture - Rapid" lang={currentLang}>
  <DocPageLayout data-testid="architecture-content">
    <Content />
  </DocPageLayout>
</Layout>
