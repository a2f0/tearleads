---
import Layout from '../../layouts/Layout.astro';
import { SwaggerUIWrapper } from '../../components/SwaggerUIWrapper';
import openapiSpec from '@rapid/api/openapi.json';
import { defaultLanguage } from '../../i18n/config';

const currentLang = defaultLanguage;
---

<Layout title="API Documentation - Rapid" lang={currentLang}>
  <section class="container mx-auto px-4 py-8">
    <div class="rounded-xl border bg-card p-6 shadow-sm">
      <SwaggerUIWrapper client:load spec={openapiSpec} />
    </div>
  </section>
</Layout>

<style is:global>
  /* Base styles */
  .swagger-ui-container .swagger-ui .topbar {
    display: none;
  }

  .swagger-ui-container .swagger-ui .info {
    margin: 0;
  }

  /* Dark theme - proper CSS instead of filter hack */
  .dark .swagger-ui-container .swagger-ui {
    background-color: transparent;
  }

  .dark .swagger-ui-container .swagger-ui .opblock-tag,
  .dark .swagger-ui-container .swagger-ui .info .title,
  .dark .swagger-ui-container .swagger-ui .info .base-url,
  .dark .swagger-ui-container .swagger-ui table thead tr th,
  .dark .swagger-ui-container .swagger-ui .parameter__name,
  .dark .swagger-ui-container .swagger-ui .parameter__type,
  .dark .swagger-ui-container .swagger-ui .response-col_status,
  .dark .swagger-ui-container .swagger-ui .response-col_description,
  .dark .swagger-ui-container .swagger-ui label,
  .dark .swagger-ui-container .swagger-ui .model-title,
  .dark .swagger-ui-container .swagger-ui .model,
  .dark .swagger-ui-container .swagger-ui .opblock .opblock-summary-description,
  .dark .swagger-ui-container .swagger-ui .opblock-description-wrapper,
  .dark .swagger-ui-container .swagger-ui .opblock-external-docs-wrapper,
  .dark .swagger-ui-container .swagger-ui .opblock-title_normal,
  .dark .swagger-ui-container .swagger-ui .response-col_links,
  .dark .swagger-ui-container .swagger-ui .btn {
    color: oklch(98.5% 0 0);
  }

  .dark .swagger-ui-container .swagger-ui .info .description p,
  .dark .swagger-ui-container .swagger-ui .opblock-description-wrapper p,
  .dark .swagger-ui-container .swagger-ui table tbody tr td,
  .dark .swagger-ui-container .swagger-ui .markdown p,
  .dark .swagger-ui-container .swagger-ui .markdown li {
    color: oklch(71.2% 0 0);
  }

  .dark .swagger-ui-container .swagger-ui .scheme-container {
    background: oklch(26.9% 0 0);
    box-shadow: none;
  }

  .dark .swagger-ui-container .swagger-ui .opblock .opblock-section-header {
    background: oklch(22% 0 0);
  }

  .dark .swagger-ui-container .swagger-ui .opblock-body pre.microlight,
  .dark .swagger-ui-container .swagger-ui .highlight-code,
  .dark .swagger-ui-container .swagger-ui pre {
    background: oklch(18% 0 0);
    color: oklch(85% 0 0);
  }

  .dark .swagger-ui-container .swagger-ui input[type="text"],
  .dark .swagger-ui-container .swagger-ui textarea {
    background: oklch(22% 0 0);
    color: oklch(98.5% 0 0);
    border-color: oklch(35% 0 0);
  }

  .dark .swagger-ui-container .swagger-ui select {
    background: oklch(22% 0 0);
    color: oklch(98.5% 0 0);
    border-color: oklch(35% 0 0);
  }

  .dark .swagger-ui-container .swagger-ui .opblock {
    border-color: oklch(35% 0 0);
    background: oklch(20% 0 0);
  }

  .dark .swagger-ui-container .swagger-ui .opblock .opblock-summary {
    border-color: oklch(35% 0 0);
  }

  .dark .swagger-ui-container .swagger-ui .model-box {
    background: oklch(22% 0 0);
  }

  .dark .swagger-ui-container .swagger-ui section.models {
    border-color: oklch(35% 0 0);
  }

  .dark .swagger-ui-container .swagger-ui section.models .model-container {
    background: oklch(20% 0 0);
  }

  .dark .swagger-ui-container .swagger-ui .responses-inner {
    background: transparent;
  }

  .dark .swagger-ui-container .swagger-ui table {
    background: transparent;
  }

  .dark .swagger-ui-container .swagger-ui .response-col_description__inner span {
    color: oklch(71.2% 0 0);
  }

  /* Links */
  .dark .swagger-ui-container .swagger-ui a {
    color: oklch(70% 0.15 250);
  }

  .dark .swagger-ui-container .swagger-ui a:hover {
    color: oklch(80% 0.15 250);
  }

  /* Tokyo Night theme */
  .tokyo-night .swagger-ui-container .swagger-ui {
    background-color: transparent;
  }

  .tokyo-night .swagger-ui-container .swagger-ui .opblock-tag,
  .tokyo-night .swagger-ui-container .swagger-ui .info .title,
  .tokyo-night .swagger-ui-container .swagger-ui .info .base-url,
  .tokyo-night .swagger-ui-container .swagger-ui table thead tr th,
  .tokyo-night .swagger-ui-container .swagger-ui .parameter__name,
  .tokyo-night .swagger-ui-container .swagger-ui .parameter__type,
  .tokyo-night .swagger-ui-container .swagger-ui .response-col_status,
  .tokyo-night .swagger-ui-container .swagger-ui .response-col_description,
  .tokyo-night .swagger-ui-container .swagger-ui label,
  .tokyo-night .swagger-ui-container .swagger-ui .model-title,
  .tokyo-night .swagger-ui-container .swagger-ui .model,
  .tokyo-night .swagger-ui-container .swagger-ui .opblock .opblock-summary-description,
  .tokyo-night .swagger-ui-container .swagger-ui .opblock-description-wrapper,
  .tokyo-night .swagger-ui-container .swagger-ui .opblock-external-docs-wrapper,
  .tokyo-night .swagger-ui-container .swagger-ui .opblock-title_normal,
  .tokyo-night .swagger-ui-container .swagger-ui .response-col_links,
  .tokyo-night .swagger-ui-container .swagger-ui .btn {
    color: oklch(83.5% 0.045 267.5);
  }

  .tokyo-night .swagger-ui-container .swagger-ui .info .description p,
  .tokyo-night .swagger-ui-container .swagger-ui .opblock-description-wrapper p,
  .tokyo-night .swagger-ui-container .swagger-ui table tbody tr td,
  .tokyo-night .swagger-ui-container .swagger-ui .markdown p,
  .tokyo-night .swagger-ui-container .swagger-ui .markdown li {
    color: oklch(65% 0.04 265);
  }

  .tokyo-night .swagger-ui-container .swagger-ui .scheme-container {
    background: oklch(18.5% 0.02 262);
    box-shadow: none;
  }

  .tokyo-night .swagger-ui-container .swagger-ui .opblock .opblock-section-header {
    background: oklch(16% 0.02 262);
  }

  .tokyo-night .swagger-ui-container .swagger-ui .opblock-body pre.microlight,
  .tokyo-night .swagger-ui-container .swagger-ui .highlight-code,
  .tokyo-night .swagger-ui-container .swagger-ui pre {
    background: oklch(14% 0.02 262);
    color: oklch(80% 0.04 265);
  }

  .tokyo-night .swagger-ui-container .swagger-ui input[type="text"],
  .tokyo-night .swagger-ui-container .swagger-ui textarea {
    background: oklch(16% 0.02 262);
    color: oklch(83.5% 0.045 267.5);
    border-color: oklch(30% 0.025 262);
  }

  .tokyo-night .swagger-ui-container .swagger-ui select {
    background: oklch(16% 0.02 262);
    color: oklch(83.5% 0.045 267.5);
    border-color: oklch(30% 0.025 262);
  }

  .tokyo-night .swagger-ui-container .swagger-ui .opblock {
    border-color: oklch(30% 0.025 262);
    background: oklch(15% 0.02 262);
  }

  .tokyo-night .swagger-ui-container .swagger-ui .opblock .opblock-summary {
    border-color: oklch(30% 0.025 262);
  }

  .tokyo-night .swagger-ui-container .swagger-ui .model-box {
    background: oklch(16% 0.02 262);
  }

  .tokyo-night .swagger-ui-container .swagger-ui section.models {
    border-color: oklch(30% 0.025 262);
  }

  .tokyo-night .swagger-ui-container .swagger-ui section.models .model-container {
    background: oklch(15% 0.02 262);
  }

  .tokyo-night .swagger-ui-container .swagger-ui .responses-inner {
    background: transparent;
  }

  .tokyo-night .swagger-ui-container .swagger-ui table {
    background: transparent;
  }

  .tokyo-night .swagger-ui-container .swagger-ui .response-col_description__inner span {
    color: oklch(65% 0.04 265);
  }

  /* Links */
  .tokyo-night .swagger-ui-container .swagger-ui a {
    color: oklch(70% 0.12 280);
  }

  .tokyo-night .swagger-ui-container .swagger-ui a:hover {
    color: oklch(80% 0.12 280);
  }
</style>
